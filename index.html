<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Downloadify - Platform Download All-in-One</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-black text-white">
    <div class="container mx-auto p-4 md:p-8 min-h-screen flex items-center justify-center">
        <div class="max-w-3xl w-full mx-auto bg-zinc-900 border-4 border-yellow-300">
            <div class="p-6 md:p-8">
                <h1 class="text-4xl md:text-5xl font-extrabold text-center mb-2 leading-tight text-yellow-300">DOWNLOADIFY</h1>
                <p class="text-center text-lg md:text-xl font-bold mb-8">PLATFORM DOWNLOAD ALL-IN-ONE</p>

                <!-- Navigation Tabs -->
                <div class="flex border-4 border-yellow-300 mb-8">
                    <button id="youtube-tab" class="flex-1 py-3 font-extrabold border-r-4 border-yellow-300 bg-yellow-300 text-black">YOUTUBE</button>
                    <button id="social-tab" class="flex-1 py-3 font-extrabold bg-zinc-900 text-yellow-300">MEDIA SOSIAL</button>
                </div>

                <!-- Download Sections -->
                <div id="youtube-section" class="space-y-6">
                    <div class="relative border-4 border-yellow-300">
                        <input id="youtube-url" type="url" placeholder="Masukkan URL YouTube..." class="w-full px-5 py-3 text-lg bg-zinc-900 text-white placeholder-gray-400 focus:outline-none focus:ring-0">
                    </div>
                    <button id="youtube-download-btn" class="w-full py-3 text-xl font-extrabold border-4 border-yellow-300 bg-yellow-300 text-black transition-colors duration-300 hover:bg-white hover:text-black focus:outline-none focus:ring-0">DOWNLOAD VIDEO</button>
                </div>

                <div id="social-section" class="hidden space-y-6">
                    <div class="relative border-4 border-yellow-300">
                        <input id="social-url" type="url" placeholder="Masukkan URL Instagram, TikTok, dll..." class="w-full px-5 py-3 text-lg bg-zinc-900 text-white placeholder-gray-400 focus:outline-none focus:ring-0">
                    </div>
                    <button id="social-download-btn" class="w-full py-3 text-xl font-extrabold border-4 border-yellow-300 bg-yellow-300 text-black transition-colors duration-300 hover:bg-white hover:text-black focus:outline-none focus:ring-0">DOWNLOAD MEDIA</button>
                </div>
            
                <!-- Status & Result Area -->
                <div class="mt-8 space-y-4">
                    <div id="status-message" class="text-center text-sm font-bold transition-opacity duration-300 h-6 opacity-0"></div>
                    
                    <div id="result-container" class="space-y-4">
                        <!-- Dynamic content will be injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get DOM elements
            const youtubeTab = document.getElementById('youtube-tab');
            const socialTab = document.getElementById('social-tab');
            const youtubeSection = document.getElementById('youtube-section');
            const socialSection = document.getElementById('social-section');

            const youtubeUrlInput = document.getElementById('youtube-url');
            const socialUrlInput = document.getElementById('social-url');
            const youtubeDownloadBtn = document.getElementById('youtube-download-btn');
            const socialDownloadBtn = document.getElementById('social-download-btn');
            
            const statusMessage = document.getElementById('status-message');
            const resultContainer = document.getElementById('result-container');

            // API Endpoints
            const youtubeApi = 'https://ytdl.siputzx.my.id/api/yt?url=';
            const socialApi = 'https://dl.siputzx.my.id/api?url=';

            // Function to show a status message to the user
            const showStatus = (message, type = 'info') => {
                statusMessage.textContent = message;
                statusMessage.classList.remove('text-red-500', 'text-green-500', 'text-white', 'opacity-0');
                if (type === 'error') {
                    statusMessage.classList.add('text-red-500', 'opacity-100');
                } else if (type === 'success') {
                    statusMessage.classList.add('text-green-500', 'opacity-100');
                } else {
                    statusMessage.classList.add('text-white', 'opacity-100');
                }
            };

            // Function to render download links
            const renderDownloadLinks = (data) => {
                // Clear previous results
                resultContainer.innerHTML = '';
                
                if (!data || data.length === 0) {
                    showStatus('Tidak ada tautan download yang ditemukan.', 'info');
                    return;
                }

                // Create and append elements for each download link
                data.forEach(item => {
                    const downloadCard = document.createElement('div');
                    downloadCard.className = 'bg-white p-4 border-4 border-yellow-300 flex flex-col sm:flex-row justify-between items-center space-y-2 sm:space-y-0';
                    
                    const title = document.createElement('span');
                    title.className = 'text-black font-medium text-sm sm:text-base text-center sm:text-left truncate w-full sm:w-2/3';
                    title.textContent = item.title;

                    const downloadLink = document.createElement('a');
                    downloadLink.href = item.url;
                    downloadLink.textContent = `DOWNLOAD (${item.quality || 'N/A'})`;
                    downloadLink.className = 'px-4 py-2 text-sm font-extrabold border-4 border-yellow-300 bg-yellow-300 text-black transition-colors duration-300 hover:bg-black hover:text-yellow-300 focus:outline-none focus:ring-0 whitespace-nowrap';
                    downloadLink.target = '_blank';
                    downloadLink.rel = 'noopener noreferrer';

                    downloadCard.appendChild(title);
                    downloadCard.appendChild(downloadLink);
                    resultContainer.appendChild(downloadCard);
                });

                showStatus('Tautan download berhasil dibuat.', 'success');
            };

            // Handle YouTube download
            const handleYoutubeDownload = async () => {
                const url = youtubeUrlInput.value.trim();
                if (!url) {
                    showStatus('Mohon masukkan URL YouTube.', 'error');
                    return;
                }
                
                // Show loading state
                youtubeDownloadBtn.textContent = 'MEMPROSES...';
                youtubeDownloadBtn.disabled = true;
                showStatus('Memproses video...', 'info');
                resultContainer.innerHTML = ''; // Clear previous results

                try {
                    const response = await fetch(`${youtubeApi}${encodeURIComponent(url)}`);
                    const data = await response.json();

                    if (response.ok) {
                        const downloads = [];
                        
                        if (data.result.audio_url) {
                            downloads.push({ title: 'Audio (MP3)', url: data.result.audio_url, quality: 'MP3' });
                        }
                        
                        if (data.result.video_720p_audio) {
                            downloads.push({ title: 'Video HD (720p)', url: data.result.video_720p_audio, quality: '720p' });
                        }
                        if (data.result.video_480p_audio) {
                            downloads.push({ title: 'Video SD (480p)', url: data.result.video_480p_audio, quality: '480p' });
                        }
                        if (data.result.video_360p_audio) {
                            downloads.push({ title: 'Video Low (360p)', url: data.result.video_360p_audio, quality: '360p' });
                        }
                        
                        renderDownloadLinks(downloads);
                    } else {
                        showStatus(`Gagal memproses URL: ${data.message || 'Respons API tidak berhasil.'}`, 'error');
                    }
                } catch (error) {
                    console.error('Error fetching YouTube download links:', error);
                    showStatus('Terjadi kesalahan saat menghubungi API. Mohon coba lagi.', 'error');
                } finally {
                    // Reset button state
                    youtubeDownloadBtn.textContent = 'DOWNLOAD VIDEO';
                    youtubeDownloadBtn.disabled = false;
                }
            };

            // Handle Social Media download
            const handleSocialDownload = async () => {
                const url = socialUrlInput.value.trim();
                if (!url) {
                    showStatus('Mohon masukkan URL media sosial.', 'error');
                    return;
                }
                
                // Show loading state
                socialDownloadBtn.textContent = 'MEMPROSES...';
                socialDownloadBtn.disabled = true;
                showStatus('Memproses media...', 'info');
                resultContainer.innerHTML = ''; // Clear previous results

                try {
                    const response = await fetch(`${socialApi}${encodeURIComponent(url)}`);
                    const data = await response.json();

                    if (response.ok) {
                        const downloads = [];
                        if (data.result.media) {
                            data.result.media.forEach((media, index) => {
                                downloads.push({
                                    title: `Media ${index + 1}`,
                                    url: media.url,
                                    quality: media.type
                                });
                            });
                        }
                        renderDownloadLinks(downloads);
                    } else {
                        showStatus(`Gagal memproses URL: ${data.message || 'Respons API tidak berhasil.'}`, 'error');
                    }
                } catch (error) {
                    console.error('Error fetching social media download links:', error);
                    showStatus('Terjadi kesalahan saat menghubungi API. Mohon coba lagi.', 'error');
                } finally {
                    // Reset button state
                    socialDownloadBtn.textContent = 'DOWNLOAD MEDIA';
                    socialDownloadBtn.disabled = false;
                }
            };

            // Event Listeners for tabs
            youtubeTab.addEventListener('click', () => {
                youtubeSection.classList.remove('hidden');
                socialSection.classList.add('hidden');
                youtubeTab.classList.remove('bg-zinc-900', 'text-yellow-300');
                youtubeTab.classList.add('bg-yellow-300', 'text-black');
                socialTab.classList.remove('bg-yellow-300', 'text-black');
                socialTab.classList.add('bg-zinc-900', 'text-yellow-300');
                resultContainer.innerHTML = '';
                showStatus('', 'info');
            });

            socialTab.addEventListener('click', () => {
                socialSection.classList.remove('hidden');
                youtubeSection.classList.add('hidden');
                socialTab.classList.remove('bg-zinc-900', 'text-yellow-300');
                socialTab.classList.add('bg-yellow-300', 'text-black');
                youtubeTab.classList.remove('bg-yellow-300', 'text-black');
                youtubeTab.classList.add('bg-zinc-900', 'text-yellow-300');
                resultContainer.innerHTML = '';
                showStatus('', 'info');
            });

            // Event Listeners for buttons
            youtubeDownloadBtn.addEventListener('click', handleYoutubeDownload);
            socialDownloadBtn.addEventListener('click', handleSocialDownload);
        });
    </script>
</body>
</html>

